<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="erp.chain.mapper.SaleDetailMapper" >
  <resultMap id="BaseResultMap" type="erp.chain.domain.SaleDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 04 15:05:01 CST 2016.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="sale_code" property="saleCode" jdbcType="CHAR" />
    <result column="package_id" property="packageId" jdbcType="BIGINT" />
    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
    <result column="is_package" property="isPackage" jdbcType="BIT" />
    <result column="promotion_id" property="promotionId" jdbcType="BIGINT" />
    <result column="quantity" property="quantity" jdbcType="DECIMAL" />
    <result column="sale_price" property="salePrice" jdbcType="DECIMAL" />
    <result column="sale_price_actual" property="salePriceActual" jdbcType="DECIMAL" />
    <result column="total_amount" property="totalAmount" jdbcType="DECIMAL" />
    <result column="is_free_of_charge" property="isFreeOfCharge" jdbcType="BIT" />
    <result column="received_amount" property="receivedAmount" jdbcType="DECIMAL" />
    <result column="is_refund" property="isRefund" jdbcType="INTEGER" />
    <result column="is_printed" property="isPrinted" jdbcType="BIT" />
    <result column="create_by" property="createBy" jdbcType="VARCHAR" />
    <result column="create_at" property="createAt" jdbcType="TIMESTAMP" />
    <result column="last_update_by" property="lastUpdateBy" jdbcType="VARCHAR" />
    <result column="last_update_at" property="lastUpdateAt" jdbcType="TIMESTAMP" />
    <result column="is_deleted" property="isDeleted" jdbcType="BIT" />
    <result column="tenant_id" property="tenantId" jdbcType="BIGINT" />
    <result column="branch_id" property="branchId" jdbcType="BIGINT" />
    <result column="discount_amount" property="discountAmount" jdbcType="DECIMAL" />
    <result column="discount_amount1" property="discountAmount1" jdbcType="DECIMAL" />
    <result column="local_id" property="localId" jdbcType="BIGINT" />
    <result column="pay_at" property="payAt" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="changed_price" property="changedPrice" jdbcType="DECIMAL" />
    <result column="saleTable_id" property="saletableId" jdbcType="BIGINT" />
    <result column="goods_spec_id" property="goodsSpecId" jdbcType="BIGINT" />
    <result column="local_sign" property="localSign" jdbcType="VARCHAR" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
    <result column="spec_amount" property="specAmount" jdbcType="DECIMAL" />
    <result column="is_produced" property="isProduced" jdbcType="BIT" />
    <result column="is_served" property="isServed" jdbcType="BIT" />
  </resultMap>

  <insert id="insert" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 04 15:05:01 CST 2016.
    -->
    insert into sale_detail (id, sale_code, package_id, 
      goods_id, is_package, promotion_id, 
      quantity, sale_price, sale_price_actual, 
      total_amount, is_free_of_charge, received_amount, 
      is_refund, is_printed, create_by, 
      create_at, last_update_by, last_update_at, 
      is_deleted, tenant_id, branch_id, 
      discount_amount, discount_amount1, local_id, 
      pay_at, remark, changed_price,
      saleTable_id,goods_spec_id,local_sign,memo,spec_amount,is_produced,is_served,vip_id,cashier,
      guide_id,trans_terminal,pay_type,batch_id,batch_goods_code)
    values (#{id,jdbcType=BIGINT}, #{saleCode,jdbcType=CHAR}, #{packageId,jdbcType=BIGINT}, 
      #{goodsId,jdbcType=BIGINT}, #{isPackage,jdbcType=BIT}, #{promotionId,jdbcType=BIGINT}, 
      #{quantity,jdbcType=DECIMAL}, #{salePrice,jdbcType=DECIMAL}, #{salePriceActual,jdbcType=DECIMAL}, 
      #{totalAmount,jdbcType=DECIMAL}, #{isFreeOfCharge,jdbcType=BIT}, #{receivedAmount,jdbcType=DECIMAL}, 
      #{isRefund,jdbcType=INTEGER}, #{isPrinted,jdbcType=BIT}, #{createBy,jdbcType=VARCHAR},
      #{createAt,jdbcType=TIMESTAMP}, #{lastUpdateBy,jdbcType=VARCHAR}, #{lastUpdateAt,jdbcType=TIMESTAMP}, 
      #{isDeleted,jdbcType=BIT}, #{tenantId,jdbcType=BIGINT}, #{branchId,jdbcType=BIGINT}, 
      #{discountAmount,jdbcType=DECIMAL}, #{discountAmount1,jdbcType=DECIMAL}, #{localId,jdbcType=BIGINT}, 
      #{payAt,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR}, #{changedPrice,jdbcType=DECIMAL}, 
      #{saletableId,jdbcType=BIGINT},#{goodsSpecId,jdbcType=BIGINT}, #{localSign,jdbcType=VARCHAR},
      #{memo,jdbcType=VARCHAR},#{specAmount,jdbcType=DECIMAL},#{isProduced,jdbcType=BIT},
      #{isServed,jdbcType=BIT},#{vipId,jdbcType=BIGINT},#{cashier,jdbcType=BIGINT},
      #{guideId,jdbcType=BIGINT},#{transTerminal,jdbcType=TINYINT},#{payType,jdbcType=TINYINT},
      #{batchId,jdbcType=VARCHAR},#{batchGoodsCode,jdbcType=VARCHAR})
  </insert>

  <update id="update" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 04 15:05:01 CST 2016.
    -->
    update sale_detail
    <set >
      <if test="saleCode != null" >
        sale_code = #{saleCode,jdbcType=CHAR},
      </if>
      <if test="packageId != null" >
        package_id = #{packageId,jdbcType=BIGINT},
      </if>
      <if test="goodsId != null" >
        goods_id = #{goodsId,jdbcType=BIGINT},
      </if>
      <if test="isPackage != null" >
        is_package = #{isPackage,jdbcType=BIT},
      </if>
      <if test="promotionId != null" >
        promotion_id = #{promotionId,jdbcType=BIGINT},
      </if>
      <if test="quantity != null" >
        quantity = #{quantity,jdbcType=DECIMAL},
      </if>
      <if test="salePrice != null" >
        sale_price = #{salePrice,jdbcType=DECIMAL},
      </if>
      <if test="salePriceActual != null" >
        sale_price_actual = #{salePriceActual,jdbcType=DECIMAL},
      </if>
      <if test="totalAmount != null" >
        total_amount = #{totalAmount,jdbcType=DECIMAL},
      </if>
      <if test="isFreeOfCharge != null" >
        is_free_of_charge = #{isFreeOfCharge,jdbcType=BIT},
      </if>
      <if test="receivedAmount != null" >
        received_amount = #{receivedAmount,jdbcType=DECIMAL},
      </if>
      <if test="isRefund != null" >
        is_refund = #{isRefund,jdbcType=INTEGER},
      </if>
      <if test="isPrinted != null" >
        is_printed = #{isPrinted,jdbcType=BIT},
      </if>
      <if test="createBy != null" >
        create_by = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createAt != null" >
        create_at = #{createAt,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateBy != null" >
        last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
      </if>
      <if test="lastUpdateAt != null" >
        last_update_at = #{lastUpdateAt,jdbcType=TIMESTAMP},
      </if>
      <if test="isDeleted != null" >
        is_deleted = #{isDeleted,jdbcType=BIT},
      </if>
      <if test="tenantId != null" >
        tenant_id = #{tenantId,jdbcType=BIGINT},
      </if>
      <if test="branchId != null" >
        branch_id = #{branchId,jdbcType=BIGINT},
      </if>
      <if test="discountAmount != null" >
        discount_amount = #{discountAmount,jdbcType=DECIMAL},
      </if>
      <if test="discountAmount1 != null" >
        discount_amount1 = #{discountAmount1,jdbcType=DECIMAL},
      </if>
      <if test="localId != null" >
        local_id = #{localId,jdbcType=BIGINT},
      </if>
      <if test="payAt != null" >
        pay_at = #{payAt,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="changedPrice != null" >
        changed_price = #{changedPrice,jdbcType=DECIMAL},
      </if>
      <if test="saletableId != null" >
        saleTable_id = #{saletableId,jdbcType=BIGINT},
      </if>
      <if test="goodsSpecId != null" >
        goods_spec_id = #{goodsSpecId,jdbcType=BIGINT},
      </if>
      <if test="localSign != null" >
        local_sign = #{localSign,jdbcType=VARCHAR},
      </if>
      <if test="memo != null" >
        memo = #{memo,jdbcType=VARCHAR},
      </if>
      <if test="specAmount != null" >
        spec_amount = #{specAmount,jdbcType=DECIMAL},
      </if>
      <if test="isProduced != null" >
        is_produced = #{isProduced,jdbcType=BIT},
      </if>
      <if test="localSign != null" >
        is_served = #{isServed,jdbcType=BIT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <insert id="insertGuideSale" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 04 15:05:01 CST 2016.
    -->
    insert into guide_sale_detail (sale_code, package_id,
    goods_id, is_package, promotion_id,
    quantity, sale_price, sale_price_actual,
    total_amount, is_free_of_charge, received_amount,
    is_refund, create_by,
    create_at, last_update_by, last_update_at,
    is_deleted, tenant_id, branch_id,
    discount_amount,
    pay_at, remark, changed_price,
    saleTable_id,goods_spec_id,local_sign,memo,spec_amount,vip_id,cashier,guide_id,sale_rate,commission_amount)
    values ( #{saleDetail.saleCode,jdbcType=CHAR}, #{saleDetail.packageId,jdbcType=BIGINT},
    #{saleDetail.goodsId,jdbcType=BIGINT}, #{saleDetail.isPackage,jdbcType=BIT}, #{saleDetail.promotionId,jdbcType=BIGINT},
    #{saleDetail.quantity,jdbcType=DECIMAL}, #{saleDetail.salePrice,jdbcType=DECIMAL}, #{saleDetail.salePriceActual,jdbcType=DECIMAL},
    #{saleDetail.totalAmount,jdbcType=DECIMAL}, #{saleDetail.isFreeOfCharge,jdbcType=BIT}, #{saleDetail.receivedAmount,jdbcType=DECIMAL},
    #{saleDetail.isRefund,jdbcType=INTEGER}, #{saleDetail.createBy,jdbcType=VARCHAR},
    #{saleDetail.createAt,jdbcType=TIMESTAMP}, #{saleDetail.lastUpdateBy,jdbcType=VARCHAR}, #{saleDetail.lastUpdateAt,jdbcType=TIMESTAMP},
    #{saleDetail.isDeleted,jdbcType=BIT}, #{saleDetail.tenantId,jdbcType=BIGINT}, #{saleDetail.branchId,jdbcType=BIGINT},
    #{saleDetail.discountAmount,jdbcType=DECIMAL},
    null, null, null,
    null,null, #{saleDetail.localSign,jdbcType=VARCHAR},
    #{saleDetail.memo,jdbcType=VARCHAR},#{saleDetail.specAmount,jdbcType=DECIMAL},#{saleDetail.vipId,jdbcType=BIGINT},#{saleDetail.cashier,jdbcType=BIGINT},#{saleDetail.guideId,jdbcType=DECIMAL},#{saleRate,jdbcType=BIGINT},#{commissionAmount,jdbcType=DECIMAL})
  </insert>


</mapper>