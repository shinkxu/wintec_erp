<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="erp.chain.mapper.o2o.DietOrderDetailMapper" >

    <insert id="insert" parameterType="DietOrderDetail" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Nov 04 15:05:01 CST 2016.
        -->
        insert into diet_order_detail (id, diet_order_info_id,is_package,
        goods_id, goods_name, package_id,
        package_name, sale_price, sale_price_actual,
        quantity, total_amount, received_amount,
        is_free_of_charge, is_refund, taste,
        taste_name, size, size_name,
        create_by, create_at, last_update_by,
        last_update_at, is_deleted,
        status, version, local_id,
        tenant_id,branch_id,retail_local_id,
        package_code, group_id, group_name,
        group_type)
        values (#{id,jdbcType=BIGINT},#{dietOrderInfoId,jdbcType=BIGINT},#{isPackage,jdbcType=TINYINT},
         #{goodsId,jdbcType=BIGINT}, #{goodsName,jdbcType=VARCHAR},#{packageId,jdbcType=BIGINT},
        #{packageName,jdbcType=VARCHAR}, #{salePrice,jdbcType=DECIMAL}, #{salePriceActual,jdbcType=DECIMAL},
        #{quantity,jdbcType=DECIMAL}, #{totalAmount,jdbcType=DECIMAL}, #{receivedAmount,jdbcType=DECIMAL},
        #{isFreeOfCharge,jdbcType=TINYINT}, #{isRefund,jdbcType=TINYINT}, #{taste,jdbcType=BIGINT},
        #{tasteName,jdbcType=VARCHAR}, #{size,jdbcType=BIGINT}, #{sizeName,jdbcType=VARCHAR},
        #{createBy,jdbcType=VARCHAR}, #{createAt,jdbcType=TIMESTAMP}, #{lastUpdateBy,jdbcType=VARCHAR},
        #{lastUpdateAt,jdbcType=TIMESTAMP}, #{isDeleted,jdbcType=BIT},
        #{status,jdbcType=TINYINT}, #{version,jdbcType=BIGINT}, #{localId,jdbcType=BIGINT},
        #{tenantId,jdbcType=BIGINT}, #{branchId,jdbcType=BIGINT},#{retailLocalId,jdbcType=VARCHAR},
        #{packageCode, jdbcType=VARCHAR}, #{groupId, jdbcType=VARCHAR}, #{groupName, jdbcType=VARCHAR},
        #{groupType, jdbcType=VARCHAR}
        )
    </insert>

    <update id="update" parameterType="map" >
        update diet_order_detail
        <set >
            <if test="status != null and status != ''" >
                status = #{status,jdbcType=VARCHAR}
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>

    <select id="select" parameterType="map" resultType="erp.chain.domain.o2o.DietOrderDetail">
        select * from diet_order_detail
        <where>
            is_deleted = 0
            <if test="tenantId != null">
                AND tenant_id = ${tenantId}
            </if>
            <if test="dietOrderInfoId != null">
                AND diet_order_info_id = #{dietOrderInfoId}
            </if>
            <if test="branchId != null">
                AND branch_id = #{branchId}
            </if>
            <if test="id != null">
                AND id = #{id}
            </if>
        </where>
    </select>
    <select id="findByCondition" resultType="erp.chain.domain.o2o.DietOrderDetail">
        SELECT * FROM diet_order_detail WHERE is_deleted=0
        <if test="tenantId != null and tenantId != ''">
            AND tenant_id =${tenantId}
        </if>
        <if test="branchId != null and branchId != ''">
            AND branch_id =#{branchId}
        </if>
        <if test="id != null and id != ''">
            AND id =#{id}
        </if>
    </select>
    <select id="findDetailByCondition" resultType="erp.chain.domain.o2o.DietOrderDetail">
        SELECT * FROM diet_order_detail WHERE is_deleted = 0 AND diet_order_info_id = ${id} AND goods_id != 0 AND goods_id IS NOT NULL
    </select>
</mapper>